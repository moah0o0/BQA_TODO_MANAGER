{% extends "base.html" %}

{% block title %}í™ˆ - ë¶€ì‚°í€´ì–´í–‰ë™ TODO{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ë¶€ì‚°í€´ì–´í–‰ë™ TODO</h1>
    <p class="page-subtitle">{{ today.strftime('%Yë…„ %mì›” %dì¼') }}</p>
</div>

<!-- ë¹ ë¥¸ ì•ˆë‚´ -->
<div class="quick-guide">
    <div class="guide-item">
        <span class="guide-icon">ğŸ“‹</span>
        <span class="guide-text"><strong>íšŒì˜</strong> íƒ­ì—ì„œ ì´ë²ˆ ë‹¬ ë…¼ì˜ì‚¬í•­ì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”</span>
    </div>
</div>

<!-- ìš”ì•½ ì¹´ë“œ -->
<div class="summary-cards">
    <div class="summary-card urgent" title="ë§ˆê°ê¹Œì§€ 3ì¼ ì´ë‚´ì¸ ì‹¤ë¬´">
        <div class="number">{{ stats.urgent }}</div>
        <div class="label">ê¸´ê¸‰ (D-3 ì´ë‚´)</div>
    </div>
    <div class="summary-card" title="ë§ˆê°ê¹Œì§€ 7ì¼ ì´ë‚´ì¸ ì‹¤ë¬´">
        <div class="number">{{ stats.week }}</div>
        <div class="label">ì´ë²ˆ ì£¼</div>
    </div>
    <div class="summary-card" title="ì•„ì§ ì™„ë£Œí•˜ì§€ ì•Šì€ ëª¨ë“  ì‹¤ë¬´">
        <div class="number">{{ stats.total }}</div>
        <div class="label">ì „ì²´ ë¯¸ì™„ë£Œ</div>
    </div>
</div>

<!-- ê¸´ê¸‰ ì‹¤ë¬´ -->
<div class="section">
    <div class="section-header">
        <div class="section-title">ğŸ”¥ ê¸´ê¸‰ ì‹¤ë¬´</div>
        <span class="section-hint">ë§ˆê° 3ì¼ ì´ë‚´</span>
    </div>

    {% if urgent_tasks %}
    <ul class="task-list">
        {% for task in urgent_tasks %}
        <li class="task-item {% if task.is_completed %}completed{% endif %}" data-task-id="{{ task.id }}">
            <button type="button" class="checkbox-btn {% if task.is_completed %}checked{% endif %}" onclick="toggleTask({{ task.id }}, this)" title="í´ë¦­í•˜ì—¬ ì™„ë£Œ/ë¯¸ì™„ë£Œ ì „í™˜">
                {% if task.is_completed %}âœ“{% endif %}
            </button>
            <div class="task-content">
                <div class="task-text">
                    {% if task.is_draft %}<span class="badge badge-draft" title="ì•„ì§ í™•ì •ë˜ì§€ ì•Šì€ ì‹¤ë¬´">ê°€ì•ˆ</span> {% endif %}
                    {{ task.content }}
                </div>
                <div class="task-meta">
                    <a href="{{ url_for('schedule_detail', schedule_id=task.schedule_id) }}" class="schedule-link" title="ì—°ê²°ëœ ì¼ì • ë³´ê¸°">{{ task.schedule_title }}</a>
                    {% if task.deadline %}
                    <span class="deadline-date">{{ task.deadline | date_kr }}</span>
                    <span class="dday {{ task.dday_class }}">{{ task.dday_text }}</span>
                    {% endif %}
<span class="assignee {% if not task.activist_name %}unassigned{% endif %}" title="ë‹´ë‹¹ì">{{ task.activist_name or 'ë¯¸ì •' }}</span>
                </div>
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">âœ¨</div>
        <div class="empty-message">ê¸´ê¸‰í•œ ì‹¤ë¬´ê°€ ì—†ìŠµë‹ˆë‹¤</div>
        <div class="empty-hint">ë§ˆê° 3ì¼ ì´ë‚´ì˜ ì‹¤ë¬´ê°€ ìˆìœ¼ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>
    </div>
    {% endif %}
</div>

<!-- ë‹¤ê°€ì˜¤ëŠ” ì¼ì • -->
<div class="section">
    <div class="section-header">
        <div class="section-title">ğŸ“… ë‹¤ê°€ì˜¤ëŠ” ì¼ì •</div>
        <a href="{{ url_for('schedules') }}" class="btn btn-ghost btn-sm">ì „ì²´ ë³´ê¸° â†’</a>
    </div>
    <p class="section-description">ì•ìœ¼ë¡œ 2ê°œì›” ì´ë‚´ì˜ ì˜ˆì •ëœ ì¼ì •ì…ë‹ˆë‹¤. í´ë¦­í•˜ë©´ ìƒì„¸ ë‚´ìš©ê³¼ ì‹¤ë¬´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

    {% if upcoming_schedules %}
    <div class="schedule-list">
        {% for schedule in upcoming_schedules %}
        <a href="{{ url_for('schedule_detail', schedule_id=schedule.id) }}" class="schedule-card" title="í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°">
            <div class="schedule-card-title">{{ schedule.title }}</div>
            <div class="schedule-card-meta">
                <span>{{ schedule.date | date_kr }}</span>
                <span class="badge badge-category">{{ schedule.category }}</span>
                {% if schedule.is_confirmed %}
                <span class="badge badge-confirmed" title="ì¼ì •ì´ í™•ì •ë¨">í™•ì •</span>
                {% else %}
                <span class="badge badge-pending" title="ì•„ì§ í™•ì •ë˜ì§€ ì•ŠìŒ">ë¯¸í™•ì •</span>
                {% endif %}
            </div>
            {% if schedule.task_count > 0 %}
            <div class="progress-bar" title="ì‹¤ë¬´ ì§„í–‰ë¥ ">
                <div class="progress-fill" style="width: {{ (schedule.completed_count / schedule.task_count * 100) | int if schedule.task_count > 0 else 0 }}%"></div>
            </div>
            <div class="progress-text">{{ schedule.completed_count | int }}/{{ schedule.task_count }} ì‹¤ë¬´ ì™„ë£Œ</div>
            {% endif %}
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">ğŸ“­</div>
        <div class="empty-message">ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤</div>
        <div class="empty-hint">
            <a href="{{ url_for('schedule_add') }}" class="btn btn-primary btn-sm">+ ìƒˆ ì¼ì • ì¶”ê°€</a>
        </div>
    </div>
    {% endif %}
</div>

<!-- ì‚¬ìš© ê°€ì´ë“œ -->
<div class="section guide-section">
    <div class="section-header">
        <div class="section-title">ğŸ’¡ ì‚¬ìš© ê°€ì´ë“œ</div>
    </div>
    <div class="guide-cards">
        <div class="guide-card">
            <div class="guide-card-icon">â˜‘ï¸</div>
            <div class="guide-card-content">
                <div class="guide-card-title">ì‹¤ë¬´ ì™„ë£Œí•˜ê¸°</div>
                <div class="guide-card-desc">ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ë©´ ì‹¤ë¬´ê°€ ì™„ë£Œë©ë‹ˆë‹¤. ì‹¤ìˆ˜ë¡œ ëˆŒë €ë‹¤ë©´ 5ì´ˆ ë‚´ì— ì·¨ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
            </div>
        </div>
        <div class="guide-card">
            <div class="guide-card-icon">ğŸ“</div>
            <div class="guide-card-content">
                <div class="guide-card-title">ê°€ì•ˆ vs í™•ì •</div>
                <div class="guide-card-desc"><span class="badge badge-draft">ê°€ì•ˆ</span>ì€ ì•„ì§ í™•ì •ë˜ì§€ ì•Šì€ ì‹¤ë¬´ì…ë‹ˆë‹¤. íšŒì˜ì—ì„œ ê²°ì • í›„ ê°€ì•ˆì„ í•´ì œí•˜ì„¸ìš”.</div>
            </div>
        </div>
        <div class="guide-card">
            <div class="guide-card-icon">ğŸ’¡</div>
            <div class="guide-card-content">
                <div class="guide-card-title">ì•„ì´ë””ì–´</div>
                <div class="guide-card-desc"><span class="badge badge-idea">ì•„ì´ë””ì–´</span>ëŠ” ì‚¬ì—… ì„¸ë¶€ë‚´ìš©ì— ëŒ€í•œ ì•„ì´ë””ì–´ì…ë‹ˆë‹¤. ì¼ì • ìƒì„¸ì—ì„œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
